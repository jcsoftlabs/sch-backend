
// Messages SMS (Vonage)
model SMSMessage {
  id           String       @id @default(uuid())
  messageId    String?      // Vonage message ID
  direction    SMSDirection
  from         String       // numéro expéditeur (format international)
  to           String       // numéro destinataire
  content      String       @db.Text
  status       SMSStatus    @default(PENDING)
  agentId      String?
  agent        User?        @relation("SMSAgent", fields: [agentId], references: [id])
  patientId    String?
  patient      Patient?     @relation(fields: [patientId], references: [id])
  caseReportId String?
  caseReport   CaseReport?  @relation(fields: [caseReportId], references: [id])
  createdAt    DateTime     @default(now())
  deliveredAt  DateTime?
  
  @@index([agentId])
  @@index([patientId])
  @@index([caseReportId])
  @@index([createdAt])
}
